// –ü–æ–ª—É—á–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–∞
function getPeriodName(period) {
    const names = {
        'breakfast': 'üç≥ –ó–∞–≤—Ç—Ä–∞–∫',
        'lunch': 'üç≤ –ü–µ—Ä–≤–æ–µ (–æ–±–µ–¥)',
        'lunch-main': 'üçñ –í—Ç–æ—Ä–æ–µ (–æ–±–µ–¥)',
        'lunch-salad': 'ü•ó –°–∞–ª–∞—Ç (–æ–±–µ–¥)',
        'dinner': 'üçΩÔ∏è –û—Å–Ω–æ–≤–Ω–æ–µ (—É–∂–∏–Ω)',
        'dinner-garnish': 'üçö –ì–∞—Ä–Ω–∏—Ä (—É–∂–∏–Ω)',
        'dinner-dessert': 'üç∞ –î–µ—Å–µ—Ä—Ç/–Ω–∞–ø–∏—Ç–æ–∫ (—É–∂–∏–Ω)'
    };
    return names[period] || period;
}

// –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤ –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
function getIngredientCategories() {
    return {
        '–ú—è—Å–æ –∏ —Ä—ã–±–∞': [
            '–≥–æ–≤—è–¥–∏–Ω–∞', '–±–∞—Ä–∞–Ω–∏–Ω–∞', '—Å–≤–∏–Ω–∏–Ω–∞', '–∫—É—Ä–∏—Ü–∞', '—Ç–µ–ª—è—Ç–∏–Ω–∞', '—Ä—ã–±–∞', '–º—è—Å–æ',
            '–∫–æ–ª–±–∞—Å–∞', '–≤–µ—Ç—á–∏–Ω–∞', '–±–µ–∫–æ–Ω', '–∫—Ä–µ–≤–µ—Ç–∫–∏', '–º–∏–¥–∏–∏', '–∫–∞–ª—å–º–∞—Ä—ã', '–ª–æ—Å–æ—Å—å',
            '—Å—É–¥–∞–∫', '–æ–∫—É–Ω—å', '—â—É–∫–∞'
        ],
        '–ú–æ–ª–æ—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã': [
            '–º–æ–ª–æ–∫–æ', '—Å—ã—Ä', '—Å–º–µ—Ç–∞–Ω–∞', '–º–∞—Å–ª–æ', '–π–æ–≥—É—Ä—Ç', '—Ç–≤–æ—Ä–æ–≥', '—Å–ª–∏–≤–∫–∏',
            '—Ñ–µ—Ç–∞', '–≥—Ä—é–π–µ—Ä', '–ø–∞—Ä–º–µ–∑–∞–Ω', '–∫–µ—Ñ–∏—Ä', '–∫–∞—Ç—ã–∫'
        ],
        '–û–≤–æ—â–∏': [
            '–∫–∞—Ä—Ç–æ—Ñ–µ–ª—å', '–º–æ—Ä–∫–æ–≤—å', '–ª—É–∫', '–ø–æ–º–∏–¥–æ—Ä', '–æ–≥—É—Ä–µ—Ü', '–∫–∞–ø—É—Å—Ç–∞', '—Å–≤—ë–∫–ª–∞',
            '–ø–µ—Ä–µ—Ü', '—á–µ—Å–Ω–æ–∫', '–∑–µ–ª–µ–Ω—å', '–ø–µ—Ç—Ä—É—à–∫–∞', '—É–∫—Ä–æ–ø', '—Ä–µ–¥–∏—Å', '–∫–∞–±–∞—á–æ–∫',
            '–±–∞–∫–ª–∞–∂–∞–Ω', '—Ç–æ–º–∞—Ç', '—Å–∞–ª–∞—Ç', '—à–ø–∏–Ω–∞—Ç', '–ø–æ—Ä–µ–π', '—Å–µ–ª—å–¥–µ—Ä–µ–π', '—Ç—ã–∫–≤–∞',
            '–±—Ä–æ–∫–∫–æ–ª–∏', '—Ü–≤–µ—Ç–Ω–∞—è –∫–∞–ø—É—Å—Ç–∞', '—Ä—É–∫–∫–æ–ª–∞', '–∞–≤–æ–∫–∞–¥–æ', '—à–∞–º–ø–∏–Ω—å–æ–Ω—ã', '–≥—Ä–∏–±—ã'
        ],
        '–ö—Ä—É–ø—ã –∏ –º–∞–∫–∞—Ä–æ–Ω—ã': [
            '–∫—Ä—É–ø–∞', '—Ä–∏—Å', '–≥—Ä–µ—á–∫–∞', '–ø—à–µ–Ω–æ', '–ø–µ—Ä–ª–æ–≤–∫–∞', '–º–∞–Ω–Ω–∞—è', '–æ–≤—Å—è–Ω–∫–∞',
            '—Ö–ª–æ–ø—å—è', '–º–∞–∫–∞—Ä–æ–Ω—ã', '–ª–∞–ø—à–∞', '–≤–µ—Ä–º–∏—à–µ–ª—å', '—Å–ø–∞–≥–µ—Ç—Ç–∏', '–ø–∞—Å—Ç–∞',
            '–±—É–ª–≥—É—Ä', '—á–µ—á–µ–≤–∏—Ü–∞', '—Ñ–∞—Å–æ–ª—å'
        ],
        '–ú—É–∫–∞ –∏ –≤—ã–ø–µ—á–∫–∞': [
            '–º—É–∫–∞', '—Ç–µ—Å—Ç–æ', '—Ö–ª–µ–±', '–±—É–ª–∫–∞', '–±–∞–≥–µ—Ç', '–ª–µ–ø—ë—à–∫–∞', '–±–ª–∏–Ω—ã', '–ø–∏—Ä–æ–≥',
            '–∫—Ä—É–∞—Å—Å–∞–Ω', '–≤–∞—Ñ–ª—è', '—á–µ–±—É—Ä–µ–∫', '–ø–µ–ª—å–º–µ–Ω–∏', '–≤–∞—Ä–µ–Ω–∏–∫–∏'
        ],
        '–Ø–π—Ü–∞': ['—è–π—Ü–∞'],
        '–°–ø–µ—Ü–∏–∏ –∏ –ø—Ä–∏–ø—Ä–∞–≤—ã': [
            '—Å–æ–ª—å', '–ø–µ—Ä–µ—Ü', '–ª–∞–≤—Ä–æ–≤—ã–π –ª–∏—Å—Ç', '—É–∫—Å—É—Å', '–≥–æ—Ä—á–∏—Ü–∞', '—Ç–æ–º–∞—Ç–Ω–∞—è –ø–∞—Å—Ç–∞',
            '—Å–æ—É—Å', '—Å–ø–µ—Ü–∏–∏', '—Ç—Ä–∞–≤—ã', '–æ—Ä–µ–≥–∞–Ω–æ', '—Ç–∏–º—å—è–Ω', '–∑–∏—Ä–∞', '–∫—É—Ä–∫—É–º–∞',
            '–∫–æ—Ä–∏–∞–Ω–¥—Ä', '–ø–∞–ø—Ä–∏–∫–∞', '–∏–º–±–∏—Ä—å', '–∫–æ—Ä–∏—Ü–∞', '–≥–≤–æ–∑–¥–∏–∫–∞', '–±–∞–∑–∏–ª–∏–∫',
            '—Ä–æ–∑–º–∞—Ä–∏–Ω', '—á–∞–±—Ä–µ—Ü', '–º—è—Ç–∞', '–∫–∏–Ω–∑–∞', '—ç—Å—Ç—Ä–∞–≥–æ–Ω', '–º–∞–π–æ—Ä–∞–Ω',
            '–¥—É—à–∏—Ü–∞', '—Ö–º–µ–ª–∏-—Å—É–Ω–µ–ª–∏'
        ],
        '–°–ª–∞–¥–æ—Å—Ç–∏': [
            '—Å–∞—Ö–∞—Ä', '–º—ë–¥', '–¥–∂–µ–º', '–≤–∞—Ä–µ–Ω—å–µ', '—Å–∏—Ä–æ–ø', '—à–æ–∫–æ–ª–∞–¥', '–∫–ª—ë–Ω'
        ],
        '–ú–∞—Å–ª–∞ –∏ –∂–∏—Ä—ã': [
            '–º–∞—Å–ª–æ', '–º–∞—Ä–≥–∞—Ä–∏–Ω', '—Å–ª–∏–≤–æ—á–Ω–æ–µ –º–∞—Å–ª–æ', '—Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ –º–∞—Å–ª–æ',
            '–æ–ª–∏–≤–∫–æ–≤–æ–µ –º–∞—Å–ª–æ', '–ø–æ–¥—Å–æ–ª–Ω–µ—á–Ω–æ–µ –º–∞—Å–ª–æ', '–∫—É–Ω–∂—É—Ç–Ω–æ–µ –º–∞—Å–ª–æ', '–∫–æ–∫–æ—Å–æ–≤–æ–µ –º–æ–ª–æ–∫–æ'
        ],
        '–ö–æ–Ω—Å–µ—Ä–≤—ã': [
            '–≥–æ—Ä–æ—à–µ–∫', '–∫—É–∫—É—Ä—É–∑–∞', '—Ñ–∞—Å–æ–ª—å', '–≥—Ä–∏–±—ã', '–º–∞—Å–ª–∏–Ω—ã', '–∫–∞–ø–µ—Ä—Å—ã',
            '–∞–Ω—á–æ—É—Å—ã', '—Ç—É–Ω–µ—Ü', '—Å–∞—Ä–¥–∏–Ω–∞', '—Å–∞–π—Ä–∞', '–ø–æ–º–∏–¥–æ—Ä—ã –∫–æ–Ω—Å–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ'
        ],
        '–û—Ä–µ—Ö–∏ –∏ —Å–µ–º–µ—á–∫–∏': [
            '–æ—Ä–µ—Ö–∏', '–≥—Ä–µ—Ü–∫–∏–µ', '–º–∏–Ω–¥–∞–ª—å', '–∫–µ—à—å—é', '—Å–µ–º–µ—á–∫–∏', '—Ç—ã–∫–≤—ã', '–∫—É–Ω–∂—É—Ç'
        ],
        '–§—Ä—É–∫—Ç—ã –∏ —è–≥–æ–¥—ã': [
            '—è–±–ª–æ–∫–∏', '–±–∞–Ω–∞–Ω—ã', '–∞–ø–µ–ª—å—Å–∏–Ω—ã', '–ª–∏–º–æ–Ω', '–ª–∞–π–º', '–∫–ª—é–∫–≤–∞', '–∏–∑—é–º',
            '—á–µ—Ä–Ω–æ—Å–ª–∏–≤', '–∫—É—Ä–∞–≥–∞'
        ]
    };
}

// –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–µ—Ü–µ–ø—Ç–∞
function validateRecipe(recipe) {
    // –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
    if (!recipe.name || typeof recipe.name !== 'string') return false;
    if (!recipe.ingredients || !Array.isArray(recipe.ingredients)) return false;
    if (!recipe.steps || !Array.isArray(recipe.steps)) return false;
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤
    for (const ing of recipe.ingredients) {
        if (!ing.name || !ing.qty) return false;
        if (typeof ing.name !== 'string' || typeof ing.qty !== 'string') return false;
    }
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —à–∞–≥–æ–≤
    for (const step of recipe.steps) {
        if (typeof step !== 'string' || step.trim() === '') return false;
    }
    
    // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–ª–∏–Ω—ã –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –∏–Ω—ä–µ–∫—Ü–∏–π
    if (recipe.name.length > 200) return false;
    if (recipe.ingredients.length > 100) return false;
    if (recipe.steps.length > 100) return false;
    
    return true;
}

// –û—á–∏—Å—Ç–∫–∞ —Å—Ç—Ä–æ–∫–∏ –æ—Ç –æ–ø–∞—Å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ (—Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è)
function sanitizeString(str) {
    if (typeof str !== 'string') return '';
    
    // –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ–ø–∞—Å–Ω—ã—Ö —Ç–µ–≥–æ–≤
    return str
        .replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi, '')
        .replace(/javascript:/gi, '')
        .replace(/on\w+=/gi, '')
        .trim();
}

// –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã
function formatDate(date) {
    return date.toLocaleDateString('ru-RU', {
        year: 'numeric',
        month: 'long',
        day: 'numeric'
    });
}

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ —á–∏—Å–ª–∞ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ
function getRandomInt(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç–æ–π –æ–±—ä–µ–∫—Ç
function isEmptyObject(obj) {
    return Object.keys(obj).length === 0;
}

// –≠–∫—Å–ø–æ—Ä—Ç –º–æ–¥—É–ª—è
const utils = {
    getPeriodName,
    getIngredientCategories,
    validateRecipe,
    sanitizeString,
    formatDate,
    getRandomInt,
    isEmptyObject
};